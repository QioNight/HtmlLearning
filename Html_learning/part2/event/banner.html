<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			* {
				padding: 0;
				margin: 0;
			}
			div {
				width: 600px;
				height: 400px;
				margin: 100px auto;
				position: relative;
				border: 1px blue solid;
				overflow: hidden;
			}
			li {
				list-style: none;
			}
			#imgUl {
				position: relative;
				top: 0;
			}
			#imgUl>li {
				float: left;
				position: relative;
			}
			#imgUl>li>img {
				width: 600px;
				height: 400px;
			}
			#numUl {
				position: absolute;
				right: 0;
				bottom: 0;
				display: none;
			}
			#numUl>li {
				display: inline-block;
				width: 30px;
				height: 30px;
				text-align: center;
				line-height: 30px;
				margin: 5px;
				border: 2px blue solid;
				border-radius: 50%;
				cursor: pointer;
			}
			.on {
				background: red;
			}
			span {
				display: block;
				position: absolute;
				background: #f5f5f5;
				width: 30px;
				height: 90px;
				opacity: .3;
				text-align: center;
				line-height: 90px;
				top: 155PX;
				font-weight: bold;
				cursor: pointer;
				display: none;
			}
			span:nth-of-type(2) {
				right: 0;
			}
		</style>
		<script src="../../jquery-3.2.1.min.js"></script>
		<script>
			$(function() {
				    //图片自动轮播 递归
				// (function fn(iNum) {
				// 	$('#numUl>li').each(function() {
				// 		$(this).removeClass('on');
				// 	});
				// 	$('#numUl>li').eq(iNum).addClass('on');
				// 	$('#imgUl').animate({"left" : $('#imgUl').position().left - 600}, 3000, 'swing', function() {
				// 		iNum++;
				// 		if(iNum >= $('img').length - 2) {
				// 			$('#imgUl').css("left", "-600px");
				// 			fn(0);
				// 		}else {
				// 			fn(iNum);
				// 		}
				// 	});
				// })(0);
				
				//分别添加第一张到最后，最后一张到前面,并设置图片ul的width
				var aFirstImg = $('#imgUl li').first().clone();
				var aLastImg = $('#imgUl li').last().clone();
				$('#imgUl').append(aFirstImg);
				$('#imgUl').prepend(aLastImg).width( ($('#imgUl li').length) * ($('img').width()) ).css("left", -600);

				var iNow = 0;

				//定时 自动轮播
				function toRun() {
					iNow++;
					if(iNow ==$('#imgUl li').length - 1) {
						$('#imgUl').css("left", -600);
						iNow = 1;
					}
					console.log(iNow);
					$('#imgUl').animate({"left" :  - (iNow + 1)*600}, 1000, 'swing');
					if(iNow == $('#imgUl li').length - 2) {
						$('#numUl li').eq(0).addClass('on').siblings().removeClass('on');
					}else {
						$('#numUl li').eq(iNow).addClass('on').siblings().removeClass('on');
					}
				}
				var runTime = setInterval(toRun, 1600);

				//鼠标移入移除
				$('div').hover(
					function() {
						clearInterval(runTime);
						$('#numUl').css("display", "block");
						$('span').each(function() {
							$(this).css("display", "block");
						});
					},
					function() {
						runTime = setInterval(toRun, 3000);
						$('#numUl').css("display", "none");
						$('span').each(function() {
							$(this).css("display", "none");
						});
					}
				);

				//点击小圆点移动
				$('#numUl li').each(function() {
					$(this).mousedown(function() {
						$(this).addClass('on').siblings().removeClass('on');
						iNow = $(this).index();
						$('#imgUl').animate({"left" : - (iNow + 1)*600}, 400, 'swing');
					});
				});
				//上一张
				$('span').eq(0).click(function() {
					iNow--;
					if(iNow == -2) {
						iNow = $('#imgUl li').length - 4;
						$('#imgUl').css("left", -($('#imgUl li').length - 2)*600);
					}
					$('#imgUl').animate({"left" : - (iNow + 1)*600}, 500, 'swing');
					$('#numUl li').eq(iNow).addClass('on').siblings().removeClass('on');
				});
				//下一张
				$('span').eq(1).click(function() {
					iNow++;
					
					if(iNow == $('#imgUl li').length - 1) {
						iNow = 1;
						$('#imgUl').css("left", -$('img').width());
					}
					$('#imgUl').animate({"left" : - (iNow + 1)*600}, 500, 'swing');
					if(iNow == $('#imgUl li').length - 2) {
						$('#numUl li').eq(0).addClass('on').siblings().removeClass('on');
					}else {
						$('#numUl li').eq(iNow).addClass('on').siblings().removeClass('on');
					}
				});
			})
		</script>
	</head>
	<body>
		<div>
			<ul id="imgUl">
				<li><img src="img/img0/abc(1).jpg" alt=""></li>
				<li><img src="img/img0/abc(2).jpg" alt=""></li>
				<li><img src="img/img0/abc(4).jpg" alt=""></li>
				<li><img src="img/img0/abc(5).jpg" alt=""></li>
				<li><img src="img/img0/abc(6).jpg" alt=""></li>
			</ul>
			<ul id="numUl">
				<li class="on">1</li>
				<li>2</li>
				<li>3</li>
				<li>4</li>
				<li>5</li>
			</ul>
			<span>&lt;</span>
			<span>&gt;</span>
		</div>
	</body>
</html>
